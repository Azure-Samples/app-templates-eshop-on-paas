on:
  workflow_call:
    outputs:
      name: 
        value: ${{ jobs.environment.outputs.name }}

jobs:

  environment:
    name: Determine Environment Name
    runs-on: ubuntu-latest
    outputs:
      name: ${{ steps.main.outputs.name }}

    steps:
      - name: Set Environment Name
        id: main
        run: |
          echo "Running on branch ${{ github.ref }}"
          if [ "${{ github.ref }}" = "refs/heads/main" ] || [ "${{ github.ref }}" = "refs/heads/master" ]; then
            echo "name=Production" >> "$GITHUB_OUTPUT"
          elif [ "${{ github.ref }}" = "refs/heads/dev" ] || [ "${{ github.ref }}" = "refs/heads/develop" ]; then
            echo "name=Test" >> "$GITHUB_OUTPUT"
          else
             echo "name=Features" >> "$GITHUB_OUTPUT"
          fi         
